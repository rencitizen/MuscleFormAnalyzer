# BodyScale Pose Analyzer

動画から姿勢推定を行い、ユーザーの身長を元に実寸法（cm単位）で体の各部位を計測するツール。

## 機能

- 身長情報に基づいたピクセルからcm単位への変換
- MediaPipeを使用した姿勢推定
- 両腕の長さ（肩～手首）の計測
- 両脚の長さ（股関節～足首）の計測
- 各関節の3D位置（cm単位）の算出
- 結果のJSON出力

## 使い方

### コマンドラインから実行

```bash
python run_cli.py
```

初回起動時は身長を入力するように促されます。前回の値が保存されている場合はそれを使用するかどうか選択できます。

### 必要なもの

- MP4形式の動画ファイル
- 被験者の身長情報（cm）

### 分析結果

分析結果は `results/body_metrics.json` に保存されます。以下のような形式で出力されます：

```json
{
  "user_height_cm": 170,
  "left_arm_cm": 61.4,
  "right_arm_cm": 60.9,
  "left_leg_cm": 91.2,
  "right_leg_cm": 90.8,
  "joints_cm": {
    "LEFT_SHOULDER": {"x":-12.3,"y":145.0,"z":5.1},
    ...
  }
}
```

## 仕組み

1. 動画からMediaPipe Poseを使用してランドマークを抽出
2. 鼻から足首までの距離と身長を元にスケール係数を計算
3. 各ランドマーク間の距離をcm単位に変換
4. 3D空間での関節位置を計算
5. 結果をJSONとして保存

## フォルダ構成

- `main.py` - メイン実行モジュール
- `config.py` - 身長情報の保存・読み込み
- `scale.py` - ピクセル→cm変換ロジック
- `analysis.py` - 腕長・脚長・関節位置計算
- `run_cli.py` - コマンドライン版実行ファイル
- `sample_videos/` - サンプル動画用フォルダ
- `results/` - 分析結果出力先フォルダ