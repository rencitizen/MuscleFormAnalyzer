{% extends "base.html" %}

{% block title %}ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ - BodyScale{% endblock %}

{% block content %}
<div class="container">
    <div class="page-header">
        <h1>BodyScale ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h1>
        <p class="subtitle">AIæ­è¼‰ãƒ•ã‚£ãƒƒãƒˆãƒã‚¹ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ </p>
    </div>

    <!-- ã‚¦ã‚§ãƒ«ã‚«ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
    <div class="welcome-section mb-4">
        <h2>ã‚ˆã†ã“ãã€{{ session.get('user_email', 'ã‚²ã‚¹ãƒˆ') }}ã•ã‚“</h2>
        <p>ä»Šæ—¥ã‚‚å¥åº·çš„ãªä¸€æ—¥ã‚’éã”ã—ã¾ã—ã‚‡ã†ï¼</p>
    </div>

    <!-- ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚»ã‚¹ -->
    <div class="feature-grid">
        <!-- ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°åˆ†æ -->
        <div class="feature-card" onclick="window.location.href='/'">
            <div class="feature-icon">ğŸ‹ï¸</div>
            <h3>ãƒ•ã‚©ãƒ¼ãƒ åˆ†æ</h3>
            <p>å‹•ç”»ã‹ã‚‰BIG3ã®é‹å‹•ãƒ•ã‚©ãƒ¼ãƒ ã‚’AIåˆ†æ</p>
            <div class="feature-stats">
                <span class="stat-label">ä»Šé€±ã®åˆ†æå›æ•°:</span>
                <span class="stat-value">12å›</span>
            </div>
        </div>

        <!-- ãƒ¯ãƒ¼ã‚¯ã‚¢ã‚¦ãƒˆè¨˜éŒ² -->
        <div class="feature-card" onclick="window.location.href='/workout_record'">
            <div class="feature-icon">ğŸ“</div>
            <h3>ãƒ¯ãƒ¼ã‚¯ã‚¢ã‚¦ãƒˆè¨˜éŒ²</h3>
            <p>ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°å†…å®¹ã‚’è¨˜éŒ²ãƒ»ç®¡ç†</p>
            <div class="feature-stats">
                <span class="stat-label">ä»Šæœˆã®è¨˜éŒ²:</span>
                <span class="stat-value">24å›</span>
            </div>
        </div>

        <!-- ã‚¨ã‚¯ã‚µã‚µã‚¤ã‚ºDB -->
        <div class="feature-card" onclick="window.location.href='/exercise_database'">
            <div class="feature-icon">ğŸ“š</div>
            <h3>ã‚¨ã‚¯ã‚µã‚µã‚¤ã‚ºDB</h3>
            <p>300ç¨®é¡ä»¥ä¸Šã®ã‚¨ã‚¯ã‚µã‚µã‚¤ã‚ºã‚’æ¤œç´¢</p>
            <div class="feature-stats">
                <span class="stat-label">ç™»éŒ²ç¨®ç›®:</span>
                <span class="stat-value">312ç¨®</span>
            </div>
        </div>

        <!-- é£Ÿäº‹åˆ†æ -->
        <div class="feature-card" onclick="window.location.href='/meal_analysis'">
            <div class="feature-icon">ğŸ½ï¸</div>
            <h3>é£Ÿäº‹åˆ†æ</h3>
            <p>å†™çœŸã‹ã‚‰æ „é¤Šæƒ…å ±ã‚’è‡ªå‹•åˆ†æ</p>
            <div class="feature-stats">
                <span class="stat-label">ä»Šé€±ã®åˆ†æ:</span>
                <span class="stat-value">8é£Ÿ</span>
            </div>
        </div>

        <!-- æ „é¤Šãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚° -->
        <div class="feature-card" onclick="window.location.href='/nutrition_tracking'">
            <div class="feature-icon">ğŸ“Š</div>
            <h3>æ „é¤Šç®¡ç†</h3>
            <p>æ—¥ã€…ã®æ „é¤Šæ‘‚å–ã‚’è¨˜éŒ²ãƒ»åˆ†æ</p>
            <div class="feature-stats">
                <span class="stat-label">å¹³å‡ã‚«ãƒ­ãƒªãƒ¼:</span>
                <span class="stat-value">2,150 kcal</span>
            </div>
        </div>

        <!-- é€²æ—çµ±è¨ˆ -->
        <div class="feature-card" onclick="window.location.href='/progress'">
            <div class="feature-icon">ğŸ“ˆ</div>
            <h3>é€²æ—çµ±è¨ˆ</h3>
            <p>ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°æˆæœã‚’å¯è¦–åŒ–</p>
            <div class="feature-stats">
                <span class="stat-label">ä»Šæœˆã®æˆé•·:</span>
                <span class="stat-value">+12%</span>
            </div>
        </div>
    </div>

    <!-- é«˜åº¦ãªæ©Ÿèƒ½ -->
    <div class="advanced-features mt-5">
        <h2>é«˜åº¦ãªæ©Ÿèƒ½</h2>
        <div class="advanced-grid">
            <!-- ãƒ‡ãƒ¼ã‚¿ç®¡ç† -->
            <div class="advanced-card">
                <h4>ãƒ‡ãƒ¼ã‚¿ç®¡ç†</h4>
                <ul>
                    <li><a href="/data_consent">ãƒ‡ãƒ¼ã‚¿åˆ©ç”¨åŒæ„</a></li>
                    <li><a href="/training_data">ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ç®¡ç†</a></li>
                    <li><a href="/data_preprocessing">ãƒ‡ãƒ¼ã‚¿å‰å‡¦ç†</a></li>
                </ul>
            </div>

            <!-- æ©Ÿæ¢°å­¦ç¿’ -->
            <div class="advanced-card">
                <h4>AI/MLæ©Ÿèƒ½</h4>
                <ul>
                    <li><a href="/simple_training">ç°¡æ˜“ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°åˆ†æ</a></li>
                    <li><a href="#" onclick="alert('ML APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯æº–å‚™ä¸­ã§ã™')">ML API</a></li>
                    <li><a href="#" onclick="alert('ãƒ¢ãƒ‡ãƒ«ç®¡ç†ã¯æº–å‚™ä¸­ã§ã™')">ãƒ¢ãƒ‡ãƒ«ç®¡ç†</a></li>
                </ul>
            </div>

            <!-- è¨­å®šãƒ»ãã®ä»– -->
            <div class="advanced-card">
                <h4>è¨­å®šãƒ»ãã®ä»–</h4>
                <ul>
                    <li><a href="/settings">ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè¨­å®š</a></li>
                    <li><a href="#" onclick="alert('ãƒ˜ãƒ«ãƒ—ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯æº–å‚™ä¸­ã§ã™')">ãƒ˜ãƒ«ãƒ—</a></li>
                    <li><a href="/logout">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</a></li>
                </ul>
            </div>
        </div>
    </div>

    <!-- ã‚·ã‚¹ãƒ†ãƒ æƒ…å ± -->
    <div class="system-info mt-5">
        <h3>ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±</h3>
        <div class="info-grid">
            <div class="info-item">
                <span class="info-label">ãƒãƒ¼ã‚¸ãƒ§ãƒ³:</span>
                <span class="info-value">1.2.0</span>
            </div>
            <div class="info-item">
                <span class="info-label">ML ãƒ¢ãƒ‡ãƒ«:</span>
                <span class="info-value">v3.1 (2024.12)</span>
            </div>
            <div class="info-item">
                <span class="info-label">ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹:</span>
                <span class="info-value">312 ã‚¨ã‚¯ã‚µã‚µã‚¤ã‚º</span>
            </div>
            <div class="info-item">
                <span class="info-label">API ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:</span>
                <span class="info-value status-ok">æ­£å¸¸</span>
            </div>
        </div>
    </div>
</div>

<style>
.welcome-section {
    background: linear-gradient(135deg, var(--primary-color, #007bff) 0%, #0056b3 100%);
    color: white;
    padding: 30px;
    border-radius: 15px;
    text-align: center;
}

.welcome-section h2 {
    margin: 0 0 10px 0;
}

.feature-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin-top: 30px;
}

.feature-card {
    background: white;
    border-radius: 15px;
    padding: 30px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: center;
}

.feature-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 20px rgba(0,0,0,0.15);
}

.feature-icon {
    font-size: 3rem;
    margin-bottom: 15px;
}

.feature-card h3 {
    font-size: 1.3rem;
    margin-bottom: 10px;
    color: var(--primary-color, #007bff);
}

.feature-card p {
    color: var(--text-muted, #6c757d);
    margin-bottom: 15px;
}

.feature-stats {
    background: var(--hover-bg, #f8f9fa);
    padding: 10px;
    border-radius: 8px;
    font-size: 0.9rem;
}

.stat-label {
    color: var(--text-muted, #6c757d);
}

.stat-value {
    font-weight: bold;
    color: var(--primary-color, #007bff);
}

.advanced-features {
    margin-top: 50px;
}

.advanced-features h2 {
    margin-bottom: 20px;
}

.advanced-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
}

.advanced-card {
    background: var(--hover-bg, #f8f9fa);
    padding: 20px;
    border-radius: 10px;
}

.advanced-card h4 {
    margin-bottom: 15px;
    color: var(--primary-color, #007bff);
}

.advanced-card ul {
    list-style: none;
    padding: 0;
}

.advanced-card li {
    margin-bottom: 10px;
}

.advanced-card a {
    color: var(--text-color, #333);
    text-decoration: none;
}

.advanced-card a:hover {
    color: var(--primary-color, #007bff);
    text-decoration: underline;
}

.system-info {
    background: var(--hover-bg, #f8f9fa);
    padding: 20px;
    border-radius: 10px;
}

.system-info h3 {
    margin-bottom: 15px;
}

.info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
}

.info-item {
    display: flex;
    justify-content: space-between;
}

.info-label {
    color: var(--text-muted, #6c757d);
}

.info-value {
    font-weight: bold;
}

.status-ok {
    color: #28a745;
}

.mb-4 {
    margin-bottom: 1.5rem;
}

.mt-5 {
    margin-top: 3rem;
}

@media (max-width: 768px) {
    .feature-grid {
        grid-template-columns: 1fr;
    }
}
</style>

<script>
// ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®åˆæœŸåŒ–
document.addEventListener('DOMContentLoaded', function() {
    // çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã®æ›´æ–°
    updateDashboardStats();
});

async function updateDashboardStats() {
    try {
        // ã“ã“ã§å®Ÿéš›ã®APIã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
        // const response = await fetch('/api/dashboard/stats');
        // const data = await response.json();
        // çµ±è¨ˆã‚’æ›´æ–°
    } catch (error) {
        console.error('çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã‚¨ãƒ©ãƒ¼:', error);
    }
}
</script>
{% endblock %}