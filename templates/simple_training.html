<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>シンプルトレーニング分析結果</title>
    <link rel="stylesheet" href="https://cdn.replit.com/agent/bootstrap-agent-dark-theme.min.css">
</head>
<body class="bg-dark text-light">
    <div class="container py-5">
        <div class="card bg-dark text-light mb-4">
            <div class="card-header">
                <h2>トレーニング分析結果</h2>
                <a href="/" class="btn btn-outline-light">ホームに戻る</a>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h4>基本情報</h4>
                        <p>種目: {{ training.get('exercise_name', training.get('exercise_type', '不明')) }}</p>
                        <p>レップ数: {{ training.get('rep_count', training.get('repetitions', 0)) }}</p>
                        <p>フォームスコア: {{ training.get('form_score', 0) }}</p>
                        
                        {% if training.get('depth_score') %}
                        <p>深さスコア: {{ training.get('depth_score', 0) }}</p>
                        {% endif %}
                        
                        {% if training.get('balance_score') %}
                        <p>バランススコア: {{ training.get('balance_score', 0) }}</p>
                        {% endif %}
                        
                        {% if training.get('tempo_score') %}
                        <p>テンポスコア: {{ training.get('tempo_score', 0) }}</p>
                        {% endif %}
                    </div>
                    <div class="col-md-6">
                        {% if training.get('body_metrics') %}
                        <h4>身体メトリクス</h4>
                        <p>身長: {{ training.get('body_metrics', {}).get('height_cm', 0) }}cm</p>
                        <p>左腕長: {{ training.get('body_metrics', {}).get('left_arm_cm', 0) }}cm</p>
                        <p>右腕長: {{ training.get('body_metrics', {}).get('right_arm_cm', 0) }}cm</p>
                        {% endif %}
                        
                        {% if training.get('issues') or training.get('strengths') %}
                        <h4>フォーム評価</h4>
                        {% if training.get('issues') %}
                        <p>改善点:</p>
                        <ul>
                            {% for issue in training.get('issues', []) %}
                            <li>{{ issue }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                        
                        {% if training.get('strengths') %}
                        <p>良い点:</p>
                        <ul>
                            {% for strength in training.get('strengths', []) %}
                            <li>{{ strength }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                        {% endif %}
                        
                        {% if training.get('advice') %}
                        <h4>アドバイス</h4>
                        <ul>
                            {% for advice in training.get('advice', []) %}
                            <li>{{ advice }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                    </div>
                </div>
                
                <!-- 視覚的分析結果の表示 -->
                {% if training.get('visualizations') %}
                <div class="row mt-4">
                    <div class="col-12">
                        <h4 class="text-center mb-3">ポーズ分析の視覚化</h4>
                    </div>
                    
                    <!-- 分析動画 -->
                    {% if training.get('visualizations', {}).get('analysis_video') %}
                    <div class="col-12 mb-4">
                        <div class="card bg-dark">
                            <div class="card-header bg-dark text-light">フォーム分析動画</div>
                            <div class="card-body p-0">
                                <video controls class="w-100">
                                    <source src="{{ training.get('visualizations', {}).get('analysis_video') }}" type="video/mp4">
                                    お使いのブラウザは動画再生をサポートしていません。
                                </video>
                            </div>
                            <div class="card-footer bg-dark text-light">
                                <small>赤色: あなたのフォーム / 緑色: 理想的なフォーム</small>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                    
                    <div class="col-12">
                        <h5 class="text-center mb-3">キーポイント分析</h5>
                    </div>
                    
                    <!-- 開始フェーズ画像 -->
                    {% if training.get('visualizations', {}).get('start_phase_image') %}
                    <div class="col-md-4 mb-3">
                        <div class="card bg-dark">
                            <div class="card-header bg-dark text-light">開始フェーズ</div>
                            <img src="{{ training.get('visualizations', {}).get('start_phase_image') }}" alt="開始ポーズ" class="img-fluid">
                        </div>
                    </div>
                    {% endif %}
                    
                    <!-- 中間フェーズ画像 -->
                    {% if training.get('visualizations', {}).get('middle_phase_image') %}
                    <div class="col-md-4 mb-3">
                        <div class="card bg-dark">
                            <div class="card-header bg-dark text-light">中間フェーズ</div>
                            <img src="{{ training.get('visualizations', {}).get('middle_phase_image') }}" alt="中間ポーズ" class="img-fluid">
                        </div>
                    </div>
                    {% endif %}
                    
                    <!-- 終了フェーズ画像 -->
                    {% if training.get('visualizations', {}).get('end_phase_image') %}
                    <div class="col-md-4 mb-3">
                        <div class="card bg-dark">
                            <div class="card-header bg-dark text-light">終了フェーズ</div>
                            <img src="{{ training.get('visualizations', {}).get('end_phase_image') }}" alt="終了ポーズ" class="img-fluid">
                        </div>
                    </div>
                    {% endif %}
                    
                    <!-- 軌跡分析画像 -->
                    {% if training.get('visualizations', {}).get('trajectory_image') %}
                    <div class="col-12 mt-3">
                        <div class="card bg-dark">
                            <div class="card-header bg-dark text-light">動きの軌跡分析</div>
                            <img src="{{ training.get('visualizations', {}).get('trajectory_image') }}" alt="軌跡分析" class="img-fluid">
                        </div>
                    </div>
                    {% endif %}
                </div>
                {% endif %}
            </div>
        </div>
        
        <a href="/" class="btn btn-primary">ホームに戻る</a>
    </div>
</body>
</html>